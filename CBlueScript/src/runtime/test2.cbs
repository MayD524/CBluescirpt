jmp main
;------------------------------
; Author: May Draskovics
; Date: 10/5/2021
; name: stdlib.cbs
; Bluescript standard library
;------------------------------
label size
pop size.lookAt
sizeof size.varSize,%size.lookAt
push %size.varSize
free %size.varSize
free %size.lookAt
ret
label println
pop println.stringToPrint
out %println.stringToPrint
out \n
free %println.stringToPrint
ret
label print
pop print.string
out %print.string
free %print.string
ret
label getType
pop getType.obj
type getType.out,%getType.obj
push %getType.out
free %getType.out
free %getType.obj
ret
label getIndex; getIndex(getIndexOf, index)
pop getIndex.index
pop getIndex.getIndexOf
index getIndex.retOfIndex,%getIndex.getIndexOf[%getIndex.index]
push %getIndex.retOfIndex
free %getIndex.index
free %getIndex.getIndexOf
free %getIndex.retOfIndex
ret
;------------------------------
; Author: May Draskovics
; Date: 10/5/2021
; name: arraylib.cbs
; Bluescript arrays
;------------------------------
; create a new array
; makeArray(arrayname, size)
label makeArray
pop makeArray.arraySize
pop makeArray.arrayName
array_make %makeArray.arrayName,%makeArray.arraySize
push %makeArray.arrayName
free %makeArray.arrayName
free %makeArray.arraySize
ret
; get a value from an array
; arrayGet(arrayname, index)
label arrayGet
pop arrayGet.arrayIndex
pop arrayGet.arrayName
array_get tmpObj,%arrayGet.arrayName[%arrayGet.arrayIndex]
push %tmpObj
free %tmpObj
free %arrayGet.arrayIndex
free %arrayGet.arrayName
ret
; append to an array
; append(arrayname, index, value)
label append
pop append.value
pop append.index
pop append.arrayname
array_set %append.arrayname[%append.index],%append.value
push 0
free %append.value
free %append.index
free %append.arrayname
ret
label main ; start of function
push test
push 2
call makeArray
pop main.x
push test2
push 2
call makeArray
pop main.b
push %main.x
push 0
push test
call append
push %main.b
push 0
push test2
call append
push %main.x
push 0
call arrayGet
pop main.c
push %main.b
push 0
call arrayGet
pop main.d
push %main.c
call println
push %main.d
call println
jmp EOF_BS_JMP_POINT
label EOF_BS_JMP_POINT